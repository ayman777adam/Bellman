<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>API Test â€” CashBox Backend</title>
<style>
body { font-family: Arial; padding: 20px; }
input, button { padding: 10px; margin: 5px; width: 300px; }
button { cursor: pointer; }
pre { background: #eee; padding: 15px; margin-top: 20px; white-space: pre-wrap; }
</style>
</head>

<body>

<h2>Ø§Ø®ØªØ¨Ø§Ø± API â€” CashBox Secure Backend</h2>

<label>ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø§Ùƒ Ø¥Ù†Ø¯:</label><br>
<input id="apiUrl" value="https://cashbox-backend.onrender.com">

<hr><br>

<h3>1) ØªØ¬Ø±Ø¨Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±</h3>
<button onclick="testServer()">Test /</button>

<h3>2) Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
<input id="regUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input id="regPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="register()">Register</button>

<h3>3) ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
<input id="logUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input id="logPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="login()">Login</button>

<pre id="output">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</pre>

<script>
function show(msg) {
    document.getElementById("output").textContent = msg;
}

async function testServer() {
    const url = document.getElementById("apiUrl").value + "/";
    try {
        const res = await fetch(url);
        show(await res.text());
    } catch (err) {
        show("Error: " + err);
    }
}

async function register() {
    const url = document.getElementById("apiUrl").value + "/api/auth/register";

    const body = {
        username: document.getElementById("regUser").value,
        password: document.getElementById("regPass").value
    };

    try {
        const res = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(body)
        });
        show(await res.text());
    } catch (err) {
        show("Error: " + err);
    }
}

async function login() {
    const url = document.getElementById("apiUrl").value + "/api/auth/login";

    const body = {
        username: document.getElementById("logUser").value,
        password: document.getElementById("logPass").value
    };

    try {
        const res = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(body)
        });

        show(await res.text());
    } catch (err) {
        show("Error: " + err);
    }
}
</script>

</body>
</html>
